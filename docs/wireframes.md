# Wireframe 文檔 v1.0

> **版本**：v1.0  
> **基於**：ORCA 分析文檔、頁面路由設計、BFF 路徑設計  
> **目的**：描述 MVP 核心功能的頁面布局、UI 區塊和資料需求，為 BFF 設計和 Mock 資料建立提供明確的輸入

---

## 文檔結構說明

每個頁面的 Wireframe 描述包含以下部分：

1. **頁面資訊**：路由、描述、對應的 BFF 路徑
2. **頁面布局**：使用 ASCII 藝術描述頁面結構
3. **UI 區塊清單**：每個區塊的位置、大小、功能描述
4. **資料需求對應表**：UI 區塊 → BFF 路徑 → 資料結構
5. **互動流程**：用戶操作與系統回應

---

## 頁面分類

### 認證系統
- [登入頁面](#登入頁面-login)
- [註冊頁面](#註冊頁面-register)

### 救援功能（B1）
- [建立救援請求頁](#建立救援請求頁-rescue-requestcreate)
- [救援請求詳情頁](#救援請求詳情頁-rescue-requestrequestid)

### Helper 功能（B4）
- [註冊成為 Helper 頁](#註冊成為-helper-頁-helperregister)
- [Helper 個人檔案頁](#helper-個人檔案頁-helperhelperid)
- [Helper 儀表板](#helper-儀表板-helperdashboard)

### 個人儀表板
- [個人儀表板](#個人儀表板-dashboard)

### 通知系統（B7）
- [通知中心](#通知中心-notifications)

### 應對錦囊（B2）
- [應對錦囊頁面](#應對錦囊頁面-response-kit)

### 同溫層牆（B5）
- [同溫層牆](#同溫層牆-venting)
- [發起聚會頁](#發起聚會頁-gatheringcreate)
- [聚會詳情頁](#聚會詳情頁-gatheringgatheringid)

---

## 登入頁面 (`/login`)

### 頁面資訊
- **路由**：`/login`
- **描述**：用戶登入頁面
- **BFF 對應**：`POST /api/auth/login`
- **路由守衛**：無（公開頁面）

### 頁面布局

```
┌─────────────────────────────────────────┐
│              Header (Logo)              │
├─────────────────────────────────────────┤
│                                         │
│            ┌─────────────┐              │
│            │  登入表單    │              │
│            │             │              │
│            │ Email       │              │
│            │ [________]  │              │
│            │             │              │
│            │ 密碼        │              │
│            │ [________]  │              │
│            │             │              │
│            │ [記住我]    │              │
│            │             │              │
│            │ [登入按鈕]  │              │
│            │             │              │
│            │ 忘記密碼？  │              │
│            │ 還沒有帳號？註冊          │
│            └─────────────┘              │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | Logo 與品牌標識 | 靜態內容 |
| `login-form` | 中央 | 固定寬度 | 登入表單 | 無（表單輸入） |
| `email-input` | 表單內 | 全寬 | Email 輸入框 | 用戶輸入 |
| `password-input` | 表單內 | 全寬 | 密碼輸入框 | 用戶輸入 |
| `remember-me` | 表單內 | 自動 | 記住我選項 | 用戶輸入 |
| `login-button` | 表單內 | 全寬 | 登入按鈕 | 觸發 `POST /api/auth/login` |
| `forgot-password-link` | 表單內 | 自動 | 忘記密碼連結 | 靜態連結 |
| `register-link` | 表單內 | 自動 | 註冊連結 | 路由到 `/register` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `login-button` | `POST /api/auth/login` | `{ email, password, rememberMe }` | `{ token, user }` | 登入成功後返回 token 和用戶資訊 |

### 互動流程

1. 用戶輸入 Email 和密碼
2. 點擊「登入」按鈕
3. 前端發送 `POST /api/auth/login` 請求
4. 成功後：
   - 儲存 token（Cookie 或 LocalStorage）
   - 導航到 `/dashboard`
5. 失敗後：
   - 顯示錯誤訊息
   - 保持當前頁面

---

## 註冊頁面 (`/register`)

### 頁面資訊
- **路由**：`/register`
- **描述**：用戶註冊頁面
- **BFF 對應**：`POST /api/auth/register`
- **路由守衛**：無（公開頁面）

### 頁面布局

```
┌─────────────────────────────────────────┐
│              Header (Logo)              │
├─────────────────────────────────────────┤
│                                         │
│            ┌─────────────┐              │
│            │  註冊表單    │              │
│            │             │              │
│            │ Email       │              │
│            │ [________]  │              │
│            │             │              │
│            │ 密碼        │              │
│            │ [________]  │              │
│            │             │              │
│            │ 確認密碼    │              │
│            │ [________]  │              │
│            │             │              │
│            │ 暱稱        │              │
│            │ [________]  │              │
│            │             │              │
│            │ [註冊按鈕]  │              │
│            │             │              │
│            │ 已有帳號？登入              │
│            └─────────────┘              │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | Logo 與品牌標識 | 靜態內容 |
| `register-form` | 中央 | 固定寬度 | 註冊表單 | 無（表單輸入） |
| `email-input` | 表單內 | 全寬 | Email 輸入框 | 用戶輸入 |
| `password-input` | 表單內 | 全寬 | 密碼輸入框 | 用戶輸入 |
| `confirm-password-input` | 表單內 | 全寬 | 確認密碼輸入框 | 用戶輸入 |
| `nickname-input` | 表單內 | 全寬 | 暱稱輸入框 | 用戶輸入 |
| `register-button` | 表單內 | 全寬 | 註冊按鈕 | 觸發 `POST /api/auth/register` |
| `login-link` | 表單內 | 自動 | 登入連結 | 路由到 `/login` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `register-button` | `POST /api/auth/register` | `{ email, password, nickname }` | `{ token, user }` | 註冊成功後返回 token 和用戶資訊 |

### 互動流程

1. 用戶填寫註冊表單（Email、密碼、確認密碼、暱稱）
2. 前端驗證表單（密碼確認、Email 格式）
3. 點擊「註冊」按鈕
4. 前端發送 `POST /api/auth/register` 請求
5. 成功後：
   - 儲存 token
   - 導航到 `/dashboard`
6. 失敗後：
   - 顯示錯誤訊息（Email 已存在等）
   - 保持當前頁面

---

## 建立救援請求頁 (`/rescue-request/create`)

### 頁面資訊
- **路由**：`/rescue-request/create`
- **描述**：建立救援請求頁面
- **BFF 對應**：`POST /api/rescue-request/create`
- **路由守衛**：需要認證，角色為 Escapee 或 SilentBuffer

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  建立救援請求                      │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  請求類型                          │ │
│  │  ○ 人力請求  ○ 空間導航  ○ 混合   │ │
│  │                                    │ │
│  │  壓力等級 (1-5)                    │ │
│  │  [1] [2] [3] [4] [5]              │ │
│  │                                    │ │
│  │  預算（新台幣）                    │ │
│  │  [________] 元                     │ │
│  │                                    │ │
│  │  詳細描述                          │ │
│  │  [________________________]        │ │
│  │  [________________________]        │ │
│  │                                    │ │
│  │  地理位置                          │ │
│  │  [地圖選擇器]                      │ │
│  │  地址：[________]                  │ │
│  │                                    │ │
│  │  [取消]  [提交請求]                │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `form-container` | 中央 | 固定寬度 | 表單容器 | 無 |
| `request-type-selector` | 表單內 | 全寬 | 請求類型選擇（單選） | 用戶輸入 |
| `stress-level-selector` | 表單內 | 全寬 | 壓力等級選擇（1-5） | 用戶輸入 |
| `budget-input` | 表單內 | 全寬 | 預算輸入框 | 用戶輸入 |
| `description-textarea` | 表單內 | 全寬 | 詳細描述文字區 | 用戶輸入 |
| `location-picker` | 表單內 | 全寬 | 地圖選擇器 | 用戶輸入 + 地圖 API |
| `address-input` | 表單內 | 全寬 | 地址輸入框 | 用戶輸入 |
| `cancel-button` | 表單內 | 自動 | 取消按鈕 | 路由到 `/dashboard` |
| `submit-button` | 表單內 | 自動 | 提交按鈕 | 觸發 `POST /api/rescue-request/create` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `submit-button` | `POST /api/rescue-request/create` | `{ requestType, stressLevel, budget?, description?, location }` | `{ id, status, createdAt }` | 建立成功後返回請求 ID 和狀態 |

### 互動流程

1. 用戶選擇請求類型（人力請求/空間導航/混合）
2. 設定壓力等級（1-5）
3. 輸入預算（可選）
4. 填寫詳細描述（可選）
5. 選擇地理位置（地圖選擇器）
6. 點擊「提交請求」
7. 前端發送 `POST /api/rescue-request/create` 請求
8. 成功後：
   - 顯示成功訊息
   - 導航到 `/rescue-request/[requestId]`
9. 失敗後：
   - 顯示錯誤訊息
   - 保持當前頁面

---

## 救援請求詳情頁 (`/rescue-request/[requestId]`)

### 頁面資訊
- **路由**：`/rescue-request/[requestId]`
- **描述**：救援請求詳情頁面
- **BFF 對應**：`GET /api/rescue-request/[id]/details`
- **路由守衛**：需要認證，且為請求擁有者或匹配的 Helper
- **頁面複雜度**：Standard (1:2-3) - 聚合 RescueRequest + Helper 資訊 + 地圖位置

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────────┬──────────────────┐  │
│  │  左側區塊    │  右側區塊         │  │
│  ├──────────────┼──────────────────┤  │
│  │              │                  │  │
│  │  請求資訊    │  Helper 資訊     │  │
│  │              │                  │  │
│  │  類型：人力  │  狀態：已匹配    │  │
│  │  壓力：⭐⭐⭐⭐│  匹配時間：...   │  │
│  │  預算：$500  │                  │  │
│  │  描述：...   │  [Helper 卡片]   │  │
│  │              │  - 名稱          │  │
│  │  狀態：      │  - 技能標籤      │  │
│  │  [pending]    │  - 評價          │  │
│  │              │  - [查看詳情]    │  │
│  │  建立時間    │                  │  │
│  │  2024-01-01  │                  │  │
│  │              │                  │  │
│  │  [取消請求]  │                  │  │
│  │              │                  │  │
│  ├──────────────┼──────────────────┤  │
│  │  地圖位置    │                  │  │
│  │  [地圖顯示]  │                  │  │
│  │  地址：...   │                  │  │
│  └──────────────┴──────────────────┘  │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `left-panel` | 左側 | 50% | 請求資訊區塊 | `GET /api/rescue-request/[id]/details` |
| `request-info` | 左側區塊內 | 全寬 | 請求基本資訊 | RescueRequest 資料 |
| `request-status` | 左側區塊內 | 全寬 | 請求狀態標籤 | RescueRequest.status |
| `cancel-button` | 左側區塊內 | 自動 | 取消請求按鈕 | 觸發 `POST /api/rescue-request/[id]/cancel` |
| `map-section` | 左側區塊內 | 全寬 | 地圖顯示 | RescueRequest.location |
| `right-panel` | 右側 | 50% | Helper 資訊區塊 | `GET /api/rescue-request/[id]/details` |
| `helper-card` | 右側區塊內 | 全寬 | Helper 卡片 | Helper 資料（如果已匹配） |
| `match-info` | 右側區塊內 | 全寬 | 匹配資訊 | 匹配時間、狀態等 |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `left-panel` | `GET /api/rescue-request/[id]/details` | `{ requestId }` | `{ rescueRequest, helper?, location }` | 聚合請求資訊、Helper 資訊（如果已匹配）、地圖位置 |
| `cancel-button` | `POST /api/rescue-request/[id]/cancel` | `{ requestId }` | `{ success }` | 取消請求 |

### 互動流程

1. 頁面載入時，發送 `GET /api/rescue-request/[id]/details`
2. 顯示請求資訊（類型、壓力等級、預算、描述、狀態）
3. 如果已匹配 Helper，顯示 Helper 卡片
4. 顯示地圖位置
5. 如果請求狀態為 `pending`，顯示「取消請求」按鈕
6. 點擊「取消請求」：
   - 發送 `POST /api/rescue-request/[id]/cancel`
   - 成功後導航到 `/dashboard`

---

## 註冊成為 Helper 頁 (`/helper/register`)

### 頁面資訊
- **路由**：`/helper/register`
- **描述**：註冊成為 Helper 頁面
- **BFF 對應**：`POST /api/helper/register`
- **路由守衛**：需要認證

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  註冊成為 Helper                  │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  個人簡介                          │ │
│  │  [________________________]        │ │
│  │  [________________________]        │ │
│  │                                    │ │
│  │  技能標籤                          │ │
│  │  [選擇技能]                        │ │
│  │  [已選：酒量大, 會修電腦]          │ │
│  │                                    │ │
│  │  時薪（新台幣，可選）              │ │
│  │  [________] 元/小時                │ │
│  │                                    │ │
│  │  可接案時間                        │ │
│  │  開始：[日期選擇器]                │ │
│  │  結束：[日期選擇器]                │ │
│  │                                    │ │
│  │  [取消]  [提交註冊]                │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `form-container` | 中央 | 固定寬度 | 表單容器 | 無 |
| `bio-textarea` | 表單內 | 全寬 | 個人簡介文字區 | 用戶輸入 |
| `skills-selector` | 表單內 | 全寬 | 技能標籤選擇器 | 用戶輸入（多選） |
| `hourly-rate-input` | 表單內 | 全寬 | 時薪輸入框 | 用戶輸入（可選） |
| `available-time-picker` | 表單內 | 全寬 | 可接案時間選擇器 | 用戶輸入 |
| `cancel-button` | 表單內 | 自動 | 取消按鈕 | 路由到 `/dashboard` |
| `submit-button` | 表單內 | 自動 | 提交按鈕 | 觸發 `POST /api/helper/register` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `submit-button` | `POST /api/helper/register` | `{ bio, skills, hourlyRate?, availableUntil? }` | `{ id, status, createdAt }` | 註冊成功後返回 Helper ID 和狀態 |

### 互動流程

1. 用戶填寫個人簡介
2. 選擇技能標籤（多選）
3. 設定時薪（可選）
4. 選擇可接案時間（可選）
5. 點擊「提交註冊」
6. 前端發送 `POST /api/helper/register` 請求
7. 成功後：
   - 顯示成功訊息
   - 導航到 `/helper/dashboard`
8. 失敗後：
   - 顯示錯誤訊息
   - 保持當前頁面

---

## Helper 個人檔案頁 (`/helper/[helperId]`)

### 頁面資訊
- **路由**：`/helper/[helperId]`
- **描述**：Helper 個人檔案頁面
- **BFF 對應**：`GET /api/helper/[id]/details`
- **路由守衛**：需要認證（公開訪問）
- **頁面複雜度**：Standard (1:2-3) - 聚合 Helper + 歷史業績 + 評價列表

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────────┬──────────────────┐  │
│  │  左側區塊    │  右側區塊         │  │
│  ├──────────────┼──────────────────┤  │
│  │              │                  │  │
│  │  Helper 資訊│  業績統計        │  │
│  │              │                  │  │
│  │  [頭像]      │  完成案件：10    │  │
│  │  名稱        │  總收入：$5000   │  │
│  │  簡介：...   │  平均評價：4.5   │  │
│  │              │  評價數：20      │  │
│  │  技能標籤    │                  │  │
│  │  [酒量大]    │                  │  │
│  │  [會修電腦]  │                  │  │
│  │              │                  │  │
│  │  時薪：$500  │                  │  │
│  │  狀態：在線  │                  │  │
│  │              │                  │  │
│  │  [聯絡 Helper]                   │  │
│  │              │                  │  │
│  ├──────────────┼──────────────────┤  │
│  │  評價列表    │                  │  │
│  │  ┌────────┐ │                  │  │
│  │  │ 評價 1 │ │                  │  │
│  │  │ ⭐⭐⭐⭐⭐│ │                  │  │
│  │  │ 內容...│ │                  │  │
│  │  └────────┘ │                  │  │
│  │  ┌────────┐ │                  │  │
│  │  │ 評價 2 │ │                  │  │
│  │  └────────┘ │                  │  │
│  └──────────────┴──────────────────┘  │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `left-panel` | 左側 | 50% | Helper 資訊區塊 | `GET /api/helper/[id]/details` |
| `helper-profile` | 左側區塊內 | 全寬 | Helper 基本資訊 | Helper 資料 |
| `helper-skills` | 左側區塊內 | 全寬 | 技能標籤列表 | Helper.skills |
| `contact-button` | 左側區塊內 | 自動 | 聯絡 Helper 按鈕 | 觸發通知或導航 |
| `right-panel` | 右側 | 50% | 業績統計區塊 | `GET /api/helper/[id]/details` |
| `stats-card` | 右側區塊內 | 全寬 | 業績統計卡片 | Helper 統計資料 |
| `reviews-section` | 下方 | 全寬 | 評價列表區塊 | `GET /api/helper/[id]/details` |
| `review-item` | 評價列表內 | 全寬 | 單一評價項目 | 評價資料 |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `left-panel`, `right-panel`, `reviews-section` | `GET /api/helper/[id]/details` | `{ helperId }` | `{ helper, stats, reviews }` | 聚合 Helper 資訊、業績統計、評價列表 |

### 互動流程

1. 頁面載入時，發送 `GET /api/helper/[id]/details`
2. 顯示 Helper 基本資訊（頭像、名稱、簡介、技能、時薪、狀態）
3. 顯示業績統計（完成案件數、總收入、平均評價、評價數）
4. 顯示評價列表（分頁載入）
5. 點擊「聯絡 Helper」：
   - 如果當前用戶有救援請求，可以發送匹配請求
   - 否則顯示提示訊息

---

## Helper 儀表板 (`/helper/dashboard`)

### 頁面資訊
- **路由**：`/helper/dashboard`
- **描述**：Helper 儀表板
- **BFF 對應**：
  - `GET /api/helper/dashboard/init-data`
  - `GET /api/helper/dashboard/available-requests`
  - `GET /api/helper/dashboard/active-requests`
  - `GET /api/helper/dashboard/history`
- **路由守衛**：需要認證，且為 Helper 身份
- **頁面複雜度**：Complex (1:N) - 多個獨立區塊

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  Helper 儀表板                    │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  ┌──────────┐  ┌──────────┐     │ │
│  │  │ 狀態切換  │  │ 業績統計  │     │ │
│  │  │ [在線]   │  │ 完成：10  │     │ │
│  │  │ [離線]   │  │ 收入：$5K │     │ │
│  │  └──────────┘  └──────────┘     │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  可接案件列表               │  │ │
│  │  │  [請求卡片 1]               │  │ │
│  │  │  [請求卡片 2]               │  │ │
│  │  │  [請求卡片 3]               │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  進行中的案件               │  │ │
│  │  │  [請求卡片 1]               │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  歷史案件                   │  │ │
│  │  │  [請求卡片 1]               │  │ │
│  │  │  [請求卡片 2]               │  │ │
│  │  └────────────────────────────┘  │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `status-toggle` | 頂部 | 自動 | 狀態切換（在線/離線） | `GET /api/helper/dashboard/init-data` + `POST /api/helper/toggle-status` |
| `stats-card` | 頂部 | 自動 | 業績統計卡片 | `GET /api/helper/dashboard/init-data` |
| `available-requests-section` | 中央 | 全寬 | 可接案件列表區塊 | `GET /api/helper/dashboard/available-requests` |
| `active-requests-section` | 中央 | 全寬 | 進行中的案件區塊 | `GET /api/helper/dashboard/active-requests` |
| `history-section` | 底部 | 全寬 | 歷史案件區塊 | `GET /api/helper/dashboard/history` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `status-toggle`, `stats-card` | `GET /api/helper/dashboard/init-data` | 無 | `{ status, stats }` | 初始資料（狀態、統計） |
| `available-requests-section` | `GET /api/helper/dashboard/available-requests` | 無 | `{ requests[] }` | 可接案件列表（獨立載入） |
| `active-requests-section` | `GET /api/helper/dashboard/active-requests` | 無 | `{ requests[] }` | 進行中的案件列表（獨立載入） |
| `history-section` | `GET /api/helper/dashboard/history` | 無 | `{ requests[] }` | 歷史案件列表（獨立載入） |
| `status-toggle` | `POST /api/helper/toggle-status` | `{ status }` | `{ success }` | 切換狀態 |

### 互動流程

1. 頁面載入時，並行發送多個 BFF 請求：
   - `GET /api/helper/dashboard/init-data`（狀態、統計）
   - `GET /api/helper/dashboard/available-requests`（可接案件）
   - `GET /api/helper/dashboard/active-requests`（進行中案件）
   - `GET /api/helper/dashboard/history`（歷史案件）
2. 每個區塊獨立顯示 Skeleton 載入狀態
3. 顯示狀態切換按鈕（在線/離線）
4. 顯示業績統計
5. 顯示可接案件列表（每個卡片可點擊查看詳情或接受）
6. 顯示進行中的案件列表
7. 顯示歷史案件列表
8. 點擊狀態切換：
   - 發送 `POST /api/helper/toggle-status`
   - 更新 UI 狀態

---

## 個人儀表板 (`/dashboard`)

### 頁面資訊
- **路由**：`/dashboard`
- **描述**：個人儀表板
- **BFF 對應**：
  - `GET /api/dashboard/init-data`
  - `GET /api/dashboard/rescue-requests`
  - `GET /api/dashboard/gatherings`
  - `GET /api/dashboard/notifications`
- **路由守衛**：需要認證
- **頁面複雜度**：Complex (1:N) - 多個獨立區塊

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  個人儀表板                        │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  ┌──────────┐  ┌──────────┐     │ │
│  │  │ 用戶資訊  │  │ 快速操作  │     │ │
│  │  │ [頭像]   │  │ [建立請求]│     │ │
│  │  │ 名稱     │  │ [發起聚會]│     │ │
│  │  │ 角色標籤 │  │ [應對錦囊]│     │ │
│  │  └──────────┘  └──────────┘     │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  我的救援請求               │  │ │
│  │  │  [請求卡片 1]               │  │ │
│  │  │  [請求卡片 2]               │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  我參與的聚會               │  │ │
│  │  │  [聚會卡片 1]               │  │ │
│  │  │  [聚會卡片 2]               │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  通知中心                   │  │ │
│  │  │  [通知 1]                   │  │ │
│  │  │  [通知 2]                   │  │ │
│  │  └────────────────────────────┘  │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `user-info-card` | 頂部 | 自動 | 用戶資訊卡片 | `GET /api/dashboard/init-data` |
| `quick-actions` | 頂部 | 自動 | 快速操作按鈕組 | 靜態內容（路由連結） |
| `rescue-requests-section` | 中央 | 全寬 | 我的救援請求區塊 | `GET /api/dashboard/rescue-requests` |
| `gatherings-section` | 中央 | 全寬 | 我參與的聚會區塊 | `GET /api/dashboard/gatherings` |
| `notifications-section` | 底部 | 全寬 | 通知中心區塊 | `GET /api/dashboard/notifications` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `user-info-card` | `GET /api/dashboard/init-data` | 無 | `{ user }` | 初始資料（用戶資訊） |
| `rescue-requests-section` | `GET /api/dashboard/rescue-requests` | 無 | `{ requests[] }` | 救援請求列表（獨立載入） |
| `gatherings-section` | `GET /api/dashboard/gatherings` | 無 | `{ gatherings[] }` | 聚會列表（獨立載入） |
| `notifications-section` | `GET /api/dashboard/notifications` | 無 | `{ notifications[] }` | 通知列表（獨立載入） |

### 互動流程

1. 頁面載入時，並行發送多個 BFF 請求：
   - `GET /api/dashboard/init-data`（用戶資訊）
   - `GET /api/dashboard/rescue-requests`（救援請求列表）
   - `GET /api/dashboard/gatherings`（聚會列表）
   - `GET /api/dashboard/notifications`（通知列表）
2. 每個區塊獨立顯示 Skeleton 載入狀態
3. 顯示用戶資訊卡片（頭像、名稱、角色）
4. 顯示快速操作按鈕（建立請求、發起聚會、應對錦囊）
5. 顯示我的救援請求列表（每個卡片可點擊查看詳情）
6. 顯示我參與的聚會列表（每個卡片可點擊查看詳情）
7. 顯示通知列表（每個通知可點擊查看詳情或標記已讀）

---

## 通知中心 (`/notifications`)

### 頁面資訊
- **路由**：`/notifications`
- **描述**：通知中心
- **BFF 對應**：`GET /api/notifications/list`
- **路由守衛**：需要認證
- **頁面複雜度**：Simple (1:1) - 一個頁面對應一個 BFF 路徑

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  通知中心                          │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  [全部] [未讀] [已讀]              │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  通知 1 (未讀)              │  │ │
│  │  │  [圖標] 標題                │  │ │
│  │  │        內容...              │  │ │
│  │  │        時間：1 小時前       │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │  通知 2 (已讀)              │  │ │
│  │  │  [圖標] 標題                │  │ │
│  │  │        內容...              │  │ │
│  │  │        時間：2 小時前       │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  [載入更多]                        │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `filter-tabs` | 頂部 | 全寬 | 篩選標籤（全部/未讀/已讀） | 前端狀態 |
| `notifications-list` | 中央 | 全寬 | 通知列表 | `GET /api/notifications/list` |
| `notification-item` | 列表內 | 全寬 | 單一通知項目 | 通知資料 |
| `load-more-button` | 底部 | 自動 | 載入更多按鈕 | 觸發分頁載入 |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `notifications-list` | `GET /api/notifications/list` | `{ filter?, page?, limit? }` | `{ notifications[], pagination }` | 通知列表（支援篩選和分頁） |

### 互動流程

1. 頁面載入時，發送 `GET /api/notifications/list`
2. 顯示通知列表（支援全部/未讀/已讀篩選）
3. 每個通知項目顯示：
   - 圖標（根據通知類型）
   - 標題和內容
   - 時間戳記
   - 未讀標記
4. 點擊通知項目：
   - 標記為已讀（發送 `POST /api/notifications/[id]/mark-read`）
   - 導航到相關頁面（根據通知類型）
5. 點擊「載入更多」：
   - 載入下一頁通知

---

## 應對錦囊頁面 (`/response-kit`)

### 頁面資訊
- **路由**：`/response-kit`
- **描述**：應對錦囊頁面
- **BFF 對應**：`POST /api/response-kit/generate`
- **路由守衛**：需要認證
- **頁面複雜度**：Simple (1:1) - 一個頁面對應一個 BFF 路徑

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  應對錦囊                          │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  輸入長輩的問話                    │ │
│  │  [________________________]        │ │
│  │  [________________________]        │ │
│  │                                    │ │
│  │  選擇語氣                          │ │
│  │  ○ 幽默  ○ 冷漠  ○ 擺爛           │ │
│  │                                    │ │
│  │  [生成腳本]                        │ │
│  │                                    │ │
│  │  ──────────────────────────────── │ │
│  │                                    │ │
│  │  生成的腳本                        │ │
│  │  ┌────────────────────────────┐  │ │
│  │  │ 腳本內容...                 │  │ │
│  │  │                            │  │ │
│  │  │ 肢體語言建議：              │  │ │
│  │  │ - 眼神堅定                 │  │ │
│  │  │ - 微笑點頭                 │  │ │
│  │  └────────────────────────────┘  │ │
│  │                                    │ │
│  │  [複製腳本]  [收藏腳本]            │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `input-section` | 中央 | 全寬 | 輸入區塊 | 無（表單輸入） |
| `question-textarea` | 輸入區塊內 | 全寬 | 問話輸入框 | 用戶輸入 |
| `tone-selector` | 輸入區塊內 | 全寬 | 語氣選擇器（單選） | 用戶輸入 |
| `generate-button` | 輸入區塊內 | 自動 | 生成腳本按鈕 | 觸發 `POST /api/response-kit/generate` |
| `output-section` | 中央 | 全寬 | 輸出區塊 | `POST /api/response-kit/generate` 回應 |
| `script-display` | 輸出區塊內 | 全寬 | 腳本內容顯示 | ResponseScript 資料 |
| `body-language-tips` | 輸出區塊內 | 全寬 | 肢體語言建議列表 | ResponseScript.bodyLanguageTips |
| `copy-button` | 輸出區塊內 | 自動 | 複製腳本按鈕 | 前端操作（複製到剪貼簿） |
| `save-button` | 輸出區塊內 | 自動 | 收藏腳本按鈕 | 觸發 `POST /api/response-script/save` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `generate-button` | `POST /api/response-kit/generate` | `{ question, tone }` | `{ script, bodyLanguageTips }` | 生成腳本（由前端或 API SERVER 提供） |
| `save-button` | `POST /api/response-script/save` | `{ scriptId }` | `{ success }` | 收藏腳本 |

### 互動流程

1. 用戶輸入長輩的問話
2. 選擇語氣（幽默/冷漠/擺爛）
3. 點擊「生成腳本」
4. 前端發送 `POST /api/response-kit/generate` 請求
5. 顯示生成的腳本內容
6. 顯示肢體語言建議列表
7. 點擊「複製腳本」：
   - 將腳本內容複製到剪貼簿
8. 點擊「收藏腳本」：
   - 發送 `POST /api/response-script/save`
   - 顯示成功訊息

---

## 同溫層牆 (`/venting`)

### 頁面資訊
- **路由**：`/venting`
- **描述**：同溫層牆（貼文流）
- **BFF 對應**：
  - `GET /api/venting/feed`
  - `GET /api/venting/gatherings`
- **路由守衛**：需要認證
- **頁面複雜度**：Complex (1:2) - 主內容區 + 側邊欄

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────────┬──────────────────┐  │
│  │  主內容區    │  側邊欄           │  │
│  ├──────────────┼──────────────────┤  │
│  │              │                  │  │
│  │  [發布貼文]  │  相關聚會        │  │
│  │              │  [聚會卡片 1]    │  │
│  │  ┌────────┐ │  [聚會卡片 2]    │  │
│  │  │ 貼文 1 │ │                  │  │
│  │  │ [圖片] │ │  [查看更多]      │  │
│  │  │ 內容...│ │                  │  │
│  │  │ 👍 10  │ │                  │  │
│  │  └────────┘ │                  │  │
│  │              │                  │  │
│  │  ┌────────┐ │                  │  │
│  │  │ 貼文 2 │ │                  │  │
│  │  │ 內容...│ │                  │  │
│  │  │ 👍 5   │ │                  │  │
│  │  └────────┘ │                  │  │
│  │              │                  │  │
│  │  [載入更多]  │                  │  │
│  └──────────────┴──────────────────┘  │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `main-content` | 左側 | 70% | 主內容區 | 無 |
| `create-post-button` | 主內容區頂部 | 全寬 | 發布貼文按鈕 | 路由到貼文創建頁或彈出表單 |
| `feed-list` | 主內容區 | 全寬 | 貼文流列表 | `GET /api/venting/feed` |
| `post-item` | 貼文流內 | 全寬 | 單一貼文項目 | VentPost 資料 |
| `load-more-button` | 主內容區底部 | 自動 | 載入更多按鈕 | 觸發分頁載入 |
| `sidebar` | 右側 | 30% | 側邊欄 | 無 |
| `gatherings-section` | 側邊欄內 | 全寬 | 相關聚會區塊 | `GET /api/venting/gatherings` |
| `gathering-card` | 聚會區塊內 | 全寬 | 單一聚會卡片 | Gathering 資料 |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `feed-list` | `GET /api/venting/feed` | `{ page?, limit? }` | `{ posts[], pagination }` | 貼文流列表（支援分頁） |
| `gatherings-section` | `GET /api/venting/gatherings` | 無 | `{ gatherings[] }` | 相關聚會列表（獨立載入） |

### 互動流程

1. 頁面載入時，並行發送兩個 BFF 請求：
   - `GET /api/venting/feed`（貼文流）
   - `GET /api/venting/gatherings`（相關聚會）
2. 顯示貼文流列表（每個貼文顯示內容、圖片、按讚數）
3. 顯示側邊欄的相關聚會列表
4. 點擊「發布貼文」：
   - 彈出表單或導航到貼文創建頁
5. 點擊貼文項目：
   - 可以按讚、留言、查看詳情
6. 點擊「載入更多」：
   - 載入下一頁貼文

---

## 發起聚會頁 (`/gathering/create`)

### 頁面資訊
- **路由**：`/gathering/create`
- **描述**：發起聚會頁面
- **BFF 對應**：`POST /api/gathering/create`
- **路由守衛**：需要認證，角色為 UrbanLoner
- **頁面複雜度**：Simple (1:1) - 一個頁面對應一個 BFF 路徑

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────────────────────────────┐ │
│  │  發起聚會                          │ │
│  ├───────────────────────────────────┤ │
│  │                                    │ │
│  │  聚會標題                          │ │
│  │  [________]                        │ │
│  │                                    │ │
│  │  聚會描述                          │ │
│  │  [________________________]        │ │
│  │  [________________________]        │ │
│  │                                    │ │
│  │  時間地點                          │ │
│  │  日期：[日期選擇器]                │ │
│  │  時間：[時間選擇器]                │ │
│  │  地點：[地圖選擇器]                │ │
│  │  地址：[________]                  │ │
│  │                                    │ │
│  │  人數上限                          │ │
│  │  [________] 人                     │ │
│  │                                    │ │
│  │  [取消]  [發起聚會]                │ │
│  └───────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `form-container` | 中央 | 固定寬度 | 表單容器 | 無 |
| `title-input` | 表單內 | 全寬 | 聚會標題輸入框 | 用戶輸入 |
| `description-textarea` | 表單內 | 全寬 | 聚會描述文字區 | 用戶輸入 |
| `datetime-picker` | 表單內 | 全寬 | 日期時間選擇器 | 用戶輸入 |
| `location-picker` | 表單內 | 全寬 | 地圖選擇器 | 用戶輸入 + 地圖 API |
| `address-input` | 表單內 | 全寬 | 地址輸入框 | 用戶輸入 |
| `max-participants-input` | 表單內 | 全寬 | 人數上限輸入框 | 用戶輸入 |
| `cancel-button` | 表單內 | 自動 | 取消按鈕 | 路由到 `/venting` |
| `submit-button` | 表單內 | 自動 | 發起聚會按鈕 | 觸發 `POST /api/gathering/create` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `submit-button` | `POST /api/gathering/create` | `{ title, description, scheduledAt, location, maxParticipants }` | `{ id, status, createdAt }` | 發起成功後返回聚會 ID 和狀態 |

### 互動流程

1. 用戶填寫聚會標題和描述
2. 選擇日期和時間
3. 選擇地點（地圖選擇器）
4. 輸入地址
5. 設定人數上限
6. 點擊「發起聚會」
7. 前端發送 `POST /api/gathering/create` 請求
8. 成功後：
   - 顯示成功訊息
   - 導航到 `/gathering/[gatheringId]`
9. 失敗後：
   - 顯示錯誤訊息
   - 保持當前頁面

---

## 聚會詳情頁 (`/gathering/[gatheringId]`)

### 頁面資訊
- **路由**：`/gathering/[gatheringId]`
- **描述**：聚會詳情頁面
- **BFF 對應**：`GET /api/gathering/[id]/details`
- **路由守衛**：需要認證
- **頁面複雜度**：Standard (1:2-3) - 聚合 Gathering + 參與者列表 + 地圖位置

### 頁面布局

```
┌─────────────────────────────────────────┐
│  Header (導航列)                         │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────────┬──────────────────┐  │
│  │  左側區塊    │  右側區塊         │  │
│  ├──────────────┼──────────────────┤  │
│  │              │                  │  │
│  │  聚會資訊    │  參與者列表       │  │
│  │              │                  │  │
│  │  標題：...   │  ┌────────────┐  │  │
│  │  描述：...   │  │ 參與者 1   │  │  │
│  │              │  │ [頭像]    │  │  │
│  │  時間：      │  └────────────┘  │  │
│  │  2024-01-01  │  ┌────────────┐  │  │
│  │  14:00       │  │ 參與者 2   │  │  │
│  │              │  └────────────┘  │  │
│  │  狀態：開放  │                  │  │
│  │              │  [加入聚會]      │  │
│  │  [取消聚會]  │  [退出聚會]      │  │
│  │              │                  │  │
│  ├──────────────┼──────────────────┤  │
│  │  地圖位置    │                  │  │
│  │  [地圖顯示]  │                  │  │
│  │  地址：...   │                  │  │
│  └──────────────┴──────────────────┘  │
│                                         │
└─────────────────────────────────────────┘
```

### UI 區塊清單

| 區塊 ID | 位置 | 大小 | 功能描述 | 資料來源 |
|---------|------|------|----------|----------|
| `header` | 頂部 | 全寬 | 導航列 | 靜態內容 |
| `left-panel` | 左側 | 50% | 聚會資訊區塊 | `GET /api/gathering/[id]/details` |
| `gathering-info` | 左側區塊內 | 全寬 | 聚會基本資訊 | Gathering 資料 |
| `gathering-status` | 左側區塊內 | 全寬 | 聚會狀態標籤 | Gathering.status |
| `cancel-button` | 左側區塊內 | 自動 | 取消聚會按鈕（僅發起者可見） | 觸發 `POST /api/gathering/[id]/cancel` |
| `map-section` | 左側區塊內 | 全寬 | 地圖顯示 | Gathering.location |
| `right-panel` | 右側 | 50% | 參與者列表區塊 | `GET /api/gathering/[id]/details` |
| `participants-list` | 右側區塊內 | 全寬 | 參與者列表 | Gathering.participants |
| `join-button` | 右側區塊內 | 自動 | 加入聚會按鈕 | 觸發 `POST /api/gathering/[id]/join` |
| `leave-button` | 右側區塊內 | 自動 | 退出聚會按鈕 | 觸發 `POST /api/gathering/[id]/leave` |

### 資料需求對應表

| UI 區塊 | BFF 路徑 | 請求資料 | 回應資料 | 說明 |
|---------|----------|----------|----------|------|
| `left-panel`, `right-panel` | `GET /api/gathering/[id]/details` | `{ gatheringId }` | `{ gathering, participants, location }` | 聚合聚會資訊、參與者列表、地圖位置 |
| `join-button` | `POST /api/gathering/[id]/join` | `{ gatheringId }` | `{ success }` | 加入聚會 |
| `leave-button` | `POST /api/gathering/[id]/leave` | `{ gatheringId }` | `{ success }` | 退出聚會 |
| `cancel-button` | `POST /api/gathering/[id]/cancel` | `{ gatheringId }` | `{ success }` | 取消聚會（僅發起者） |

### 互動流程

1. 頁面載入時，發送 `GET /api/gathering/[id]/details`
2. 顯示聚會資訊（標題、描述、時間、狀態）
3. 顯示參與者列表（頭像、名稱）
4. 顯示地圖位置
5. 根據用戶狀態顯示按鈕：
   - 如果未參與且狀態為 `open`：顯示「加入聚會」
   - 如果已參與：顯示「退出聚會」
   - 如果是發起者：顯示「取消聚會」
6. 點擊「加入聚會」：
   - 發送 `POST /api/gathering/[id]/join`
   - 成功後更新 UI
7. 點擊「退出聚會」：
   - 發送 `POST /api/gathering/[id]/leave`
   - 成功後更新 UI
8. 點擊「取消聚會」：
   - 發送 `POST /api/gathering/[id]/cancel`
   - 成功後導航到 `/venting`

---

**文檔版本**：v1.0  
**最後更新**：2024  
**維護者**：待指定

